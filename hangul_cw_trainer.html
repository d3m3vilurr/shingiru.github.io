<head>
<title>한글 CW 연습기</title>
<script type="text/javascript">
/*! hangul-js 2019-12-10 */
!function(){"use strict";var r,d,g,l,t,e,h=["ㄱ",["ㄱ","ㄱ"],"ㄴ","ㄷ",["ㄷ","ㄷ"],"ㄹ","ㅁ","ㅂ",["ㅂ","ㅂ"],"ㅅ",["ㅅ","ㅅ"],"ㅇ","ㅈ",["ㅈ","ㅈ"],"ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],p=["ㅏ","ㅐ","ㅑ",["ㅑ","ㅣ"],"ㅓ","ㅔ","ㅕ",["ㅕ","ㅣ"],"ㅗ",["ㅗ","ㅏ"],["ㅗ","ㅐ"],["ㅗ","ㅣ"],"ㅛ","ㅜ",["ㅜ","ㅓ"],["ㅜ","ㅔ"],["ㅜ","ㅣ"],"ㅠ","ㅡ",["ㅡ","ㅣ"],"ㅣ"],C=["","ㄱ",["ㄱ","ㄱ"],["ㄱ","ㅅ"],"ㄴ",["ㄴ","ㅈ"],["ㄴ","ㅎ"],"ㄷ","ㄹ",["ㄹ","ㄱ"],["ㄹ","ㅁ"],["ㄹ","ㅂ"],["ㄹ","ㅅ"],["ㄹ","ㅌ"],["ㄹ","ㅍ"],["ㄹ","ㅎ"],"ㅁ","ㅂ",["ㅂ","ㅅ"],"ㅅ",["ㅅ","ㅅ"],"ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],A=44032;function n(n){for(var r=n.length,t={0:0},e=0;e<r;e++)n[e]&&(t[n[e].charCodeAt(0)]=e);return t}function o(n){for(var r,t,e=n.length,o={},i=0;i<e;i++)r=n[i][0].charCodeAt(0),t=n[i][1].charCodeAt(0),void 0===o[r]&&(o[r]={}),o[r][t]=n[i][2].charCodeAt(0);return o}function v(n){return void 0!==r[n]}function y(n){return void 0!==d[n]}function m(n){return void 0!==g[n]}function u(n){return void 0!==l[n]}function j(n){return 44032<=n&&n<=55203}function b(n,r){return!(!e[n]||!e[n][r])&&e[n][r]}function S(n,r){return!(!t[n]||!t[n][r])&&t[n][r]}r=n(["ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄸ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅃ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]),d=n(["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]),g=n(["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"]),l=n(["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]),t=o([["ㄱ","ㅅ","ㄳ"],["ㄴ","ㅈ","ㄵ"],["ㄴ","ㅎ","ㄶ"],["ㄹ","ㄱ","ㄺ"],["ㄹ","ㅁ","ㄻ"],["ㄹ","ㅂ","ㄼ"],["ㄹ","ㅅ","ㄽ"],["ㄹ","ㅌ","ㄾ"],["ㄹ","ㅍ","ㄿ"],["ㄹ","ㅎ","ㅀ"],["ㅂ","ㅅ","ㅄ"],["ㄱ","ㄱ","ㄲ"],["ㄷ","ㄷ","ㄸ"],["ㅂ","ㅂ","ㅃ"],["ㅅ","ㅅ","ㅆ"],["ㅈ","ㅈ","ㅉ"]]),e=o([["ㅗ","ㅏ","ㅘ"],["ㅗ","ㅐ","ㅙ"],["ㅗ","ㅣ","ㅚ"],["ㅜ","ㅓ","ㅝ"],["ㅜ","ㅔ","ㅞ"],["ㅜ","ㅣ","ㅟ"],["ㅡ","ㅣ","ㅢ"]]);function w(n,r){if(null===n)throw new Error("Arguments cannot be null");"object"==typeof n&&(n=n.join(""));for(var t,e,o,i,u,f=[],c=n.length,a=0;a<c;a++){var s=[];j(i=n.charCodeAt(a))?(e=((i-=A)-(o=i%28))/28%21,t=parseInt((i-o)/28/21),"object"==typeof h[t]?s=s.concat(h[t]):s.push(h[t]),"object"==typeof p[e]?s=s.concat(p[e]):s.push(p[e]),0<o&&("object"==typeof C[o]?s=s.concat(C[o]):s.push(C[o]))):v(i)?"string"==typeof(u=y(i)?h[d[i]]:C[l[i]])?s.push(u):s=s.concat(u):m(i)?"string"==typeof(u=p[g[i]])?s.push(u):s=s.concat(u):s.push(n.charAt(a)),r?f.push(s):f=f.concat(s)}return f}function i(n){return"string"!=typeof n?"":(n=w(n)).join("")}function f(c){"string"==typeof c&&(c=w(c));var n,r,a=[],t=c.length,e=0,s=-1,h=!1;function o(n){var r,t,e,o,i=0,u="";if(h=!1,!(n<s+1))for(var f=1;;f++){if(1===f){if(m(r=c[s+f].charCodeAt(0)))return s+f+1<=n&&m(t=c[s+f+1].charCodeAt(0))?a.push(String.fromCharCode(b(r,t))):a.push(c[s+f]),void(s=n);if(!y(r))return a.push(c[s+f]),void(s=n);u=c[s+f]}else if(2===f){if(y(t=c[s+f].charCodeAt(0)))return r=S(r,t),u=String.fromCharCode(r),a.push(u),void(s=n);u=String.fromCharCode(28*(21*d[r]+g[t])+A)}else 3===f?(b(t,e=c[s+f].charCodeAt(0))?t=b(t,e):i=e,u=String.fromCharCode(28*(21*d[r]+g[t])+l[i]+A)):4===f?(i=S(i,o=c[s+f].charCodeAt(0))?S(i,o):o,u=String.fromCharCode(28*(21*d[r]+g[t])+l[i]+A)):5===f&&(i=S(i,o=c[s+f].charCodeAt(0)),u=String.fromCharCode(28*(21*d[r]+g[t])+l[i]+A));if(n<=s+f)return a.push(u),void(s=n)}}for(var i=0;i<t;i++)y(n=c[i].charCodeAt(0))||m(n)||u(n)?(0===e?y(n)?e=1:m(n)&&(e=4):1==e?m(n)?e=2:S(r,n)?e=5:o(i-1):2==e?u(n)?e=3:m(n)?b(r,n)||(o(i-1),e=4):(o(i-1),e=1):3==e?u(n)?!h&&S(r,n)?h=!0:(o(i-1),e=1):y(n)?(o(i-1),e=1):m(n)&&(o(i-2),e=2):4==e?m(n)?b(r,n)?(o(i),e=0):o(i-1):(o(i-1),e=1):5==e&&(e=m(n)?(o(i-2),2):(o(i-1),1)),r=n):(o(i-1),o(i),e=0);return o(i-1),a.join("")}function c(n){this.string=n,this.disassembled=w(n).join("")}c.prototype.search=function(n){return w(n).join("").indexOf(this.disassembled)};var a={disassemble:w,d:w,disassembleToString:i,ds:i,assemble:f,a:f,search:function(n,r){var t=w(n).join(""),e=w(r).join("");return t.indexOf(e)},rangeSearch:function(n,r){var t,e=w(n).join(""),o=w(r).join(""),i=w(n,!0),u=new RegExp(o,"gi"),f=[];if(!r.length)return[];for(;t=u.exec(e);)f.push(t.index);return f.map(function(n){return[function(n){for(var r=0,t=0;r<i.length;++r)if(n<(t+=i[r].length))return r}(n),function(n){for(var r=0,t=0;r<i.length;++r)if(t+=i[r].length,n+o.length<=t)return r}(n)]})},Searcher:c,endsWithConsonant:function(n){"object"==typeof n&&(n=n.join(""));var r=n.charCodeAt(n.length-1);if(j(r)){if(0<(r-=A)%28)return!0}else if(v(r))return!0;return!1},endsWith:function(n,r){return w(n).pop()===r},isHangul:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),j(n)},isComplete:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),j(n)},isConsonant:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),v(n)},isVowel:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),m(n)},isCho:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),y(n)},isJong:function(n){return"string"==typeof n&&(n=n.charCodeAt(0)),u(n)},isHangulAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!j(n.charCodeAt(r)))return!1;return!0},isCompleteAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!j(n.charCodeAt(r)))return!1;return!0},isConsonantAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!v(n.charCodeAt(r)))return!1;return!0},isVowelAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!m(n.charCodeAt(r)))return!1;return!0},isChoAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!y(n.charCodeAt(r)))return!1;return!0},isJongAll:function(n){if("string"!=typeof n)return!1;for(var r=0;r<n.length;r++)if(!u(n.charCodeAt(r)))return!1;return!0}};"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module?module.exports=a:window.Hangul=a}();
</script>
<style>
body {
    background-color: white ;
    font-family: 'Maven Pro', 'sans serif';
    font-size: large;
}
#page {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
    padding: 1em;
    border-radius: 19px;
}
p {
    padding: 4px;
    background: white;
    color: black;
}
input {
    padding: 4px;
    border: 1px solid lightsalmon;
    transition: box-shadow 0.3s;
    background: lightyellow;
    border-radius: 5px;
    color: black;
    font-family: 'Maven Pro', 'sans serif';
    font-size: large;
}
input:focus { 
    border: 1px solid teal;
    box-shadow: 0 0 5px 1px powderblue;
}
button {
    color: black;
    font-family: 'Maven Pro', 'sans serif';
    font-size: large;
}
#freq { 
    width: 3em;
}
#speed {
    width: 3em;
}
#volume {
    width: 3em;
}
textarea {
    width : 100%;
    height : 50%;
    padding: 10px;
    border: 1px solid lightsalmon;
    transition: box-shadow 0.3s;
    background: lightyellow;
    border-radius: 5px;
    color: black;
    font-family: 'Maven Pro', 'sans serif';
    font-size: large;
    line-height: 2em;
}
.hidden_sample {
    display : none;
}
#counter {
    float: right;
}
.font_medium {
    font-size : medium;
}
::selection {
    background-color: rgba(255, 0, 0, 0.5);
}

</style>
</head>
<body><div id="page">
<p>
<h2>한글 CW 연습기 by DS1TZE</h2>
</p>
<p>
Frequency : <input type="number" id="freq" value="600" step="10" size="4" min="200" max="1200" />Hz
&nbsp;
Speed : <input type="number" id="speed" value="20" size="2" min="5" max="50" />wpm
&nbsp;
Volume : <input type="number" id="volume" value="100" size="3" min="10" max="100" step="10" />%
&nbsp;
Extra Gap : <label><input type="radio" name="key" value="computer" checked /> None</label>
<label><input type="radio" name="key" value="elmer" /> Small</label>
<label><input type="radio" name="key" value="farnsworth" /> Large</label>
&nbsp;
<button id="play">PLAY</button>
<button id="stop">STOP</button>
&nbsp;
<label><input type="checkbox" id="selection_only" /> Play selection only</label>
<label><input type="checkbox" id="highlight_slowly" /> Highlight slowly</label>
<label><input type="checkbox" id="repeat" /> Repeat</label>
</p>
<p>
<button id="hangul_qso_1">Hangul QSO Sample 1</button>
<button id="hangul_qso_2">Hangul QSO Sample 2</button>
<button id="hangul_qso_3">Hangul QSO Sample 3</button>
<button id="hangul_qso_4">Hangul QSO Sample 4</button>
<button id="english_qso_1">English QSO Sample 1</button>
<button id="english_qso_2">English QSO Sample 2</button>
</p>
<textarea id="hangul_txt_1" spellcheck="false">
CQ CQ CQ DE HL5KY HL5KY <AR> K   

HL5KY DE DS1ABC DS1ABC K   

DS1ABC DE HL5KY TNX FER CALL UR RST IS 599 5NN VY GUD <BT> NAME IS JOE JOE QTH IS BUSAN BUSAN HW? DS1ABC DE HL5KY K   

HL5KY DE DS1ABC <KA> 조오엠님 안녕하십니까? <BT> 신호는 역시 599 5NN으로 잘 들어옵니다. 저의 이름은 홍길동 홍길동이며 서울 서울에 살고 있습니다 <KA> HL5KY DE DS1ABC K   

DS1ABC DE HL5KY <KA> 예 홍길동님 반갑습니다 <BT> 저의 이름은 조윤재 조윤재입니다. 한글로 교신하게 되니 아주 좋습니다 종종 뵙도록 하겠습니다 <AR> DS1ABC DE HL5KY <KN>   

HL5KY DE DS1ABC <KA> 예 조오엠님 첫 교신 대단히 감사합니다 <BT> 다음에 또 뵙겠습니다. 안녕히 계십시오 <AR> HL5KY DE DS1ABC 73 TU <SK> E E  

TNX QSO 73 TU <SK> E E  

TU E E  
</textarea>
<div id="hangul_txt_1_caption">※ QSO Sample from : HL5KY & HL5BTF Amateur Radio Blog <a href="https://hl5ky.tistory.com/105" target="_blank">https://hl5ky.tistory.com/105</a></div>

<textarea id="hangul_txt_2" class="hidden_sample">
CQ CQ CQ DE HL4LF HL4LF <AR>   

HL4LF DE 6K5EIA 6K5EIA <KN>   

6K5EIA DE HL4LF <KA> 안녕하십니까 반갑습니다. 귀국의 신호는 599 5NN으로 잘 수신됩니다. 이곳은 여수 여수입니다. 저의 이름은 정경철 정경철입니다. <AR> 6K5EIA DE HL4LF <KN>   

HL4LF DE 6K5EIA <KA> 예 정오엠님 이렇게 뵙게 되어 반갑습니다. 신호는 579 57N으로 들어옵니다 <BT> 저의 이름은 장석대 장석대라고 하며 울산 울산에 살고 있습니다. 울산의 날씨는 조금 흐리고 빗방울이 떨어지고 있습니다. <KA> HL4LF DE 6K5EIA <KN>   

6K5EIA DE HL4LF <KA> 예 장석대오엠님 반갑습니다 <BT> 방금 일본 신호가 강하게 들어와서 조금 혼신을 받았지만 잘 수신하였습니다. 여수도 아침에 비가 왔는데 지금은 햇살이 비치고 있습니다. 기온은 약 20도 정도입니다 <AR> 6K5EIA DE HL4LF K   

HL4LF DE 6K5EIA <KA> 일본 혼신이 있군요. 울산에서도 일본 신호가 잘 수신되어서 자주 혼신을 받는 편입니다. 여수는 날이 개었군요. 그러면 좋은 주말 보내시고 다음에 또 뵙기 바랍니다. 건강하세요 <AR> HL4LF DE 6K5EIA 73 <SK>   

6K5EIA DE HL4LF <KA> 예 잘 알겠습니다. 오늘 교신 감사드립니다. 자주 전신에서 뵙도록 하겠습니다. 즐거운 주말 보내십시오 6K5EIA DE HL4LF 73 TU <SK> E E  

TU <SK> E E  

E E  
</textarea>
<div id="hangul_txt_2_caption" class="hidden_sample">※ QSO Sample from : HL5KY & HL5BTF Amateur Radio Blog <a href="https://hl5ky.tistory.com/106" target="_blank">https://hl5ky.tistory.com/106</a></div>

<textarea id="hangul_txt_3" class="hidden_sample">
CQ CQ CQ DE HL2BCW HL2BCW K   

HL2BCW DE HL5MP <KN>   

HL5MP DE HL2BCW <KA> 아이구 이오엠님 이거 얼마만입니까?  조영보 조영보입니다. 잘 지내십니까? 신호는 589 58N으로 잘 들어옵니다. 저는 지금 원주 원주에 살고 있습니다 <AR> HL5MP DE HL2BCW <KN>   

HL2BCW DE HL5MP <KA> 예 조오엠 오랜만입니다. 신호는 599 5NN입니다. 정말 오랜만이네요. 아마 얼굴 본 지가 20년은 넘었을겁니다. 저는 덕분에 잘 지내고 있습니다. 오래전에 퇴직해서 지금은 양산 양산에 살고 있습니다. 요즘은 주로 낚시를 많이 다니고 건강을 위해서 운동도 꾸준히 하고 있습니다. 단파 운용을 다시 시작한 지는 얼마 되지 않습니다. 베란다에 조그만 안테나를 설치해서 운용하고 있습니다. HL2BCW DE HL5MP <KN>   

HL5MP DE HL2BCW <KA> 그러시군요. 저도 곧 퇴직을 앞두고 있습니다. 퇴직후에 고향에 갈까 하는 생각도 해 보았지만 오랫동안 객지에서 지내다보니 결정이 쉽지 않습니다. 저도 다른 쪽에 관심을 두고 있어서 햄활동은 많이 하지 않았습니다. 최근에 단파 상태가 좋아졌다고 해서 요즘은 가끔 무전기의 전원을 넣어 보고 있습니다. 앞으로 종종 뵙도록 하겠습니다. HL5MP DE HL2BCW <KN>   

HL2BCW DE HL5MP <KA> 예 다들 나이가 드니 이전에 즐기던 취미로 돌아오는 모양입니다. 기회가 되면 음성 교신도 기대하겠습니다. 즐거운 주말 보내시기 바라며 이만 73 <AR> HL2BCW DE HL5MP <KN>   

R <BT> 예 자주 나오도록 하겠습니다. 항상 건강하십시오 73 <SK> E E  

73 TU <SK> E E  

E E  
</textarea>
<div id="hangul_txt_3_caption" class="hidden_sample">※ QSO Sample from : HL5KY & HL5BTF Amateur Radio Blog <a href="https://hl5ky.tistory.com/107" target="_blank">https://hl5ky.tistory.com/107</a></div>

<textarea id="hangul_txt_4" class="hidden_sample">
HL2LKL DE HL1SB K   

HL1SB DE HL2LKL <BT> <KA> 유 오엠님 <BT> 안녕하세요? 신호는 599 599 입니다. <AR> HL1SB DE HL2LKL K   

HL2LKL DE HL1SB <BT> <KA> <KA> <BT> 전 오엠님 또 만나뵙게 되어 반갑습니다, 신호 역시 599 좋습니다, 지금 저의 출력은 20와트 20와트 입니다, 공간상태가 좋아서 저출력인데도 신호가 잘 들어가는 것 같아서 다행입니다. <AR> HL2LKL DE HL1SB K   

HL1SB DE HL2LKL <BT> <KA> 예, 오엠님 몇일만에 만나서 반갑습니다 <BT> 예, 오늘은 공간상태가 좋아서 <BT> 저 출력인 20왓트로 송신하시는 데도 <BT> 안산에 아주 강력하게 신호가 들어옵니다 <BT> 저는 현재 출력이 백왓트입니다. <AR> HL1SB DE HL2LKL K   

R HL2LKL DE HL1SB <BT> <KA> <BT> 예, 전 오엠님 잘 수신했습니다, 오엠님 신호는 언제나 이곳에서 잘 수신되고 있습니다 HI HI <BT> 제가 지금 사용하고 있는 장비는 메인 장비가 아니고, 포터블용 저출력 장비라서, 최대출력이 20왓트밖에 안 됩니다, 주로 이 장비를 전신 교신에 사용하고 있습니다. <AR> HL2LKL DE HL1SB K   
 
HL1SB DE HL2LKL <BT> <KA> 예, 오엠님 말씀 잘 수신했습니다 <BT> 오엠님께서는 아주 예전 장비를 사용하시네요 <BT> 출력이 최대가 20왓트 장비이시네요 <BT> 그러나 음질도 아주 좋습니다 <BT> 예전 장비를 사용하시는 오엠님을 만나면 부럽습니다 <BT> 저는 아이콤 IC7300 IC7300 장비를 사용하고 있습니다 <BT> 안테나는 십오층 옥상에 다이폴을 사용하고 있습니다 <BT> 다행히 관리사무소에서 승인하여서요 <BT> 안테나는 안산 오엠님들이 오셔서 설치해 주었습니다. <AR> HL1SB DE HL2LKL K   

HL2LKL DE HL1SB <BT> <KA> <BT> 예, 전 오엠님 잘 수신했습니다, 제 장비는 옛날 장비는 아니고요, 비교적 최신 장비이긴 한데, 중국제 소형 SDR SDR 장비입니다, 오엠님께서 사용하시는 장비도 SDR 장비죠 HI HI <BT> 오엠님의 안테나도 15층 옥상에 설치한 다이폴이군요, 저도 15층 옥상에 안테나를 설치했습니다, 삼점오와 칠메가 용 다이폴입니다 HI HI <BT> 전 오엠님, 오늘 이렇게 또 다시 만나서 롱큐에스오 하게 되어 즐거웠습니다, 무더운 날씨에 무탈하게 계시기 바랍니다, 다음에 뵐 때까지 안녕히 계시기 바랍니다. <AR> HL2LKL DE HL1SB K   

HL1SB DE HL2LKL <BT> <KA> 예, 오엠님께서 사용하시는 장비는 최근 장비이시군요 <BT> 중국의 SDR 장비이시라고 수신하였습니다 <BT> 안테나도 15층에 설치하셨고요 <BT> 오엠님 무더운 날씨에 건강 조심하시고요 <BT> 또 만날 때까지 안녕히 계십시요. <AR> HL1SB DE HL2LKL GL GB TU <VA> E E   

R FB HL2LKL DE HL1SB <BT> <KA> 예, 전 오엠님 오늘 교신 정말 감사했습니다, 그럼 이만 실례합니다, 안녕히 계세요 73 HL2LKL DE HL1SB 73 TU TU E E   

OK <BT> <KA> 예, 오엠님 제가 더 교신을 할 수가 있어서 영광이었습니다 <BT> 앞으로 자주 만나뵙겠습니다 <BT> 또 만나면 아마추어에 대해 한수를 가르쳐주세요 HI HI <BT> 안녕히 계세요. <AR> HL1SB DE HL2LKL GL GB 73 TU TU E E   

OK DE HL1SB <BT> <KA> <BT> 아이고 오엠님, 가르쳐 드리다뇨 HI 오엠님께서는 이미 고수이신데요 HI HI 73 HL2LKL DE HL1SB 73 TU TU E E   

QSL DR OM TNX FB QSO HPE CUAGN <BT> <AR> HL1SB DE HL2LKL 73 TU E E   

73 GB TU TU E E  

TU  

E  

E  
</textarea>
<div id="hangul_txt_4_caption" class="hidden_sample">※ QSO Sample from : HL1SB Youtube Channel <a href="https://www.youtube.com/watch?v=TkbhZqdAPdw" target="_blank">https://www.youtube.com/watch?v=TkbhZqdAPdw</a></div>

<textarea id="english_txt_1" class="hidden_sample">
CQ CQ CQ DE DS1TWO DS1TWO K   

DS1TWO DE 6K2KXY 6K2KXY <KN>   

6K2KXY DE DS1TWO GM DR OM ES TKS FER CALL <BT> UR RST RST 599 5NN <BT> NAME NAME CHOI CHOI <BT> QTH QTH SEONGNAM SEONGNAM <AR> 6K2KXY DE DS1TWO <KN>   

R R DS1TWO DE 6K2KXY GM DR CHOI OM <BT> UR RST RST 599 5NN <BT> NAME NAME SEO SEO <BT> QTH QTH ANYANG ANYANG <AR> DS1TWO DE 6K2KXY <KN>   

R R 6K2KXY DE DS1TWO <BT> TKS FER FB QSO DR SEO OM ES HPE CUAGN <AR> 6K2KXY DE DS1TWO 73 SK TU E E   

R R DS1TWO DE 6K2KXY <BT> TKS FER FB QSO DR CHOI OM ES HPE CUAGN <AR> DS1TWO DE 6K2KXY 73 SK TU E E  

E  

E  
</textarea>
<div id="english_txt_1_caption" class="hidden_sample">※ QSO Sample from : DS1TZE</div>

<textarea id="english_txt_2" class="hidden_sample">
CQ CQ CQ DE HL1ABC HL1ABC PSE K   

HL1ABC DE DS5XYZ DS5XYZ <KN>   

DS5XYZ DE HL1ABC <BT> GA ES TNX FER CALL <BT> UR RST 569 56N <BT> NAME IS LEE LEE QTH SEOUL SEOUL <BT> HW? <AR> DS5XYZ DE HL1ABC <KN>   

HL1ABC DE DS5XYZ <BT> GA DR LEE TNX FB RPT UR RST 599 5NN <BT> OP PARK PARK ES QTH MASAN MASAN <BT> HW? <AR> HL1ABC DE DS5XYZ <KN>   

DS5XYZ DE HL1ABC <BT> R PARK TNX RPT ES INFO OM PARK <BT> RIG IS IC7300 ANT IS DP <BT> WX IS WARM 28DC <BT> HW? <AR> DS5XYZ DE HL1ABC <KN>   

HL1ABC DE DS5XYZ <BT> RIG IS FT817 ANT IS INV <BT> WX IS RAINY AND COOL <AR> HL1ABC DE DS5XYZ <KN>   

DS5XYZ DE HL1ABC <BT> MNI TNX INFO ES FB QSO <BT> QSL VIA BURO <BT> 73 ES CUAGN <AR> DS5XYZ DE HL1ABC <SK>   

HL1ABC DE DS5XYZ <BT> FB LEE TNX FER NICE QSO 73 ES BCNU <AR> HL1ABC DE DS5XYZ <SK>  

TU 73 E E  

TU E E  
</textarea>
<div id="english_txt_2_caption" class="hidden_sample">※ QSO Sample from : HL5KY & HL5BTF Amateur Radio Blog <a href="https://hl5ky.tistory.com/99" target="_blank">https://hl5ky.tistory.com/99</a></div>

<p>
    <h3>Intro.</h3><br />
    안녕하세요. DS1TZE 입니다.<br /><br />
    위 프로그램은 한글 CW 청취 연습기입니다.<br />영문과 숫자를 포함해 원하는 내용을 입력하고 PLAY 버튼을 누르면 모스 부호로 들려줍니다.<br />
    CW 청취 연습에 유용한 웹사이트인 Seiuchy를 사용하던 중, 그 근간이 되는 모스 코드 생성 라이브러리를 알게 되어, 한글 자모 분해 라이브러리를 붙여 만들게 되었습니다.<br />
    많은 활용 바라며, 건의 사항은 온에어에서 말씀해주시기 바랍니다.<br />
    <br />
    <br />
    
    <h3>Links</h3><br />
    Seiuchy - <a href="http://seiuchy.macache.com/" target="_blank">http://seiuchy.macache.com/</a><br />
    Morse Code generator Javascript 라이브러리 - <a href="https://gist.github.com/eholk/0115691987090973cefe" target="_blank">https://gist.github.com/eholk/0115691987090973cefe</a><br />
    위 라이브러리 제작 관련 글 - <a href="https://blog.theincredibleholk.org/blog/2014/06/23/generating-morse-code-with-javascript/" target="_blank">https://blog.theincredibleholk.org/blog/2014/06/23/generating-morse-code-with-javascript/</a><br />
    위 라이브러리가 사용하는 기술인 Web Audio API - <a href="https://webaudio.github.io/web-audio-api/" target="_blank">https://webaudio.github.io/web-audio-api/<a/><br />
    한글 자모 분해 Javascipt 라이브러리* - <a href="https://github.com/e-/Hangul.js/" target="_blank">https://github.com/e-/Hangul.js/</a><br />
    ※ 한글 CW는 26개 부호만 사용하기 때문에, 라이브러리를 살짝 수정해 "ㅖ"와 "ㅒ"는 각각 "ㅕ" + "ㅣ" 및 "ㅑ" + "ㅣ" 로 분해하도록 하고, 같은 홑낱자로 이루어진 겹낱자도 분해하도록 했습니다.<br />
    <br />
    <br />

    <h3>DE DS1TZE - <a href="https://www.qrz.com/db/DS1TZE" target="_blank" class="font_medium">https://www.qrz.com/db/DS1TZE</a>
    <span id="counter">
        <a href="https://hits.seeyoufarm.com"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fshingiru.github.io%2Fhangul_cw_trainer.html&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false"/></a>
    </span>
    </h3>
    
</p>
<script type="text/javascript">
function MorseNode(ac, rate) {
    // ac is an audio context.
    this._oscillator = ac.createOscillator();
    this._gain = ac.createGain();

    this._gain.gain.value = 0;
    this._oscillator.type = 'sine';
    this._oscillator.frequency.value = 600;

    this._oscillator.connect(this._gain);
    this.key = 'computer';

    if ("undefined" == typeof rate)
        rate = 20;
    this._dot = 1.2 / rate; // formula from Wikipedia.

    this._oscillator.start(0);
}

MorseNode.prototype.connect = function(target) {
    return this._gain.connect(target);
}

MorseNode.prototype.MORSE = {
    "A": ".-",
    "B": "-...",
    "C": "-.-.",
    "D": "-..",
    "E": ".",
    "F": "..-.",
    "G": "--.",
    "H": "....",
    "I": "..",
    "J": ".---",
    "K": "-.-",
    "L": ".-..",
    "M": "--",
    "N": "-.",
    "O": "---",
    "P": ".--.",
    "Q": "--.-",
    "R": ".-.",
    "S": "...",
    "T": "-",
    "U": "..-",
    "V": "...-",
    "W": ".--",
    "X": "-..-",
    "Y": "-.--",
    "Z": "--..",

    "1": ".----",
    "2": "..---",
    "3": "...--",
    "4": "....-",
    "5": ".....",
    "6": "-....",
    "7": "--...",
    "8": "---..",
    "9": "----.",
    "0": "-----",
    
    ".": ".-.-.-",
    ",": "--..--",
    "?": "..--..",
    "/": "-..-.",
    "+": ".-.-.",
    "-": "-....-",
    "=": "-...-",
    ":": "---...",
    ";": "-.-.-.",
    "(": "-.--.",
    ")": "-.--.-",
    "'": ".----.",
    "\"": ".-..-.",
    "@": ".--.-.",
    
    "ㄱ": ".-..",
    "ㄴ": "..-.",
    "ㄷ": "-...",
    "ㄹ": "...-",
    "ㅁ": "--",
    "ㅂ": ".--",
    "ㅅ": "--.",
    "ㅇ": "-.-",
    "ㅈ": ".--.",
    "ㅊ": "-.-.",
    "ㅋ": "-..-",
    "ㅌ": "--..",
    "ㅍ": "---",
    "ㅎ": ".---",
    "ㅏ": ".",
    "ㅑ": "..",
    "ㅓ": "-",
    "ㅕ": "...",
    "ㅗ": ".-",
    "ㅛ": "-.",
    "ㅜ": "....",
    "ㅠ": ".-.",
    "ㅡ": "-..",
    "ㅣ": "..-",
    "ㅔ": "-.--",
    "ㅐ": "--.-",
    
    // for prosign
    "&" : ".-...",
    "Ŝ" : "...-.",
    // non-standard
    "[" : "-...-.-",
    "]" : "...-.-",
    "^" : "-.-.-"
};

MorseNode.prototype.PROSIGN = {
    "<AR>" : "+",
    "<KN>" : "(",
    "<AS>" : "&",
    "<BT>" : "=",
    "<SN>" : "Ŝ",
    // non-standard
    "<BK>" : "[",
    "<SK>" : "]",
    "<VA>" : "]",
    "<KA>" : "^"
};

MorseNode.prototype.dotfac = function(t) {
    switch (this.key) {
            // t is type of dotvalue.  l=letter int. i=inter el. s=spaces .=dit -=dah 
        case 'computer':
            return 1;
        case 'farnsworth': //uses farnsworth
            if (t=='s') return 6;
            if (t=='l') return 4;
        case 'elmer': //uses farnsworth
            if (t=='s') return 4;
            if (t=='l') return 1.5;
            return 1;
        }

}

MorseNode.prototype.playChar = function(t, c) {
    for (var i = 0; i < c.length; i++) {
        switch(c[i]) {
        case '.':
            this._gain.gain.setValueAtTime(1.0 * vol, t);
            t += this._dot * this.dotfac('.');
            this._gain.gain.setValueAtTime(0.0, t);
            break;
        case '-':
            this._gain.gain.setValueAtTime(1.0 * vol, t);
            t += 3 * this._dot * this.dotfac('-');
            this._gain.gain.setValueAtTime(0.0, t);
            break;
        }
        t += this._dot * this.dotfac('i');
    }
    return t;
}

var timestamp = [], highlightStart, hightlightEnd, highlightStartReal, stopped = false, selectionStart = -1, selectionEnd;

MorseNode.prototype.playString = function(t, w) {
    this.key = document.querySelector('input[name="key"]:checked').value;
    window.localStorage.setItem('key', this.key);
    
    w = this.convertHangulAndProsign(w.toUpperCase());
    timestamp = [];
    
    for (var n = 0; n < w.length; n++) {
        timestamp.push(t);
        var c = w[n];
        var hangul = (c.length > 1);
        for (var i = 0; i < c.length; i++) {
            if(c[i] == ' ') {
                t += 4 * this._dot * this.dotfac('s'); // 3 dots gap already added after ending letter before
            }
            else if("undefined" != typeof this.MORSE[c[i]]) {
                t = this.playChar(t, this.MORSE[c[i]]); // 1 gap after dit/dah
                t += 2 * this._dot * this.dotfac('l'); // with this 2 more gap, whole gap between letter is 3
            }
        }
        if (hangul) {
            t += 2 * this._dot * this.dotfac('l');
        }
    }
    timestamp.push(t);
    return t;
}

MorseNode.prototype.convertHangulAndProsign = function(w) {
    // convert prosign
    for (var key in this.PROSIGN) {
        w = w.replace(new RegExp(key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), this.PROSIGN[key]);
    }
    return Hangul.disassemble(w, true);
}

Morse.prototype.getSpaceDelayInMills = function() {
    return 7 * this._dot * this.dotfac('s') * 1000;
}


var ac, filter, morse, vol = 1.0;

var freq = document.querySelector("#freq")
var wpm = document.querySelector("#speed");
var volume = document.querySelector("#volume");
var play = document.querySelector("#play");
var stop = document.querySelector("#stop");
var txt = document.querySelector("#hangul_txt_1");
var keyComputer = document.querySelector('input[name="key"][value="computer"]');
var keyElmer = document.querySelector('input[name="key"][value="elmer"]');
var keyFarnsworth = document.querySelector('input[name="key"][value="farnsworth"]');
var selectionOnly = document.querySelector("#selection_only");
var highlightSlowly = document.querySelector("#highlight_slowly");
var repeat = document.querySelector("#repeat");

function renewMorse() {
    ac = (ac || new (window.AudioContext || window.webkitAudioContext)());
    morse && morse._oscillator.stop(0);
    morse = new MorseNode(ac, parseInt(wpm.value));
    
    filter = ac.createBiquadFilter(); 
    filter.frequency.value = freq.value;
    filter.Q.value = 0;
    
    morse.connect(filter);
    filter.connect(ac.destination);
    
    morse._dot = 1.2 / parseFloat(wpm.value);
    morse._oscillator.frequency.value = parseInt(freq.value);
}
stop.onclick = function() {
    renewMorse();
    morse.playString(ac.currentTime, " ");
    txt.readOnly = false;
    txt.focus();
    if (selectionStart != -1)
        txt.setSelectionRange(selectionStart, selectionEnd);
    stopped = true;
}
play.onclick = function() {
    renewMorse();
    txt.focus();
    
    if (selectionStart != -1 && !stopped)
        txt.setSelectionRange(selectionStart, selectionEnd);
    selectionStart = txt.selectionStart;
    selectionEnd = txt.selectionEnd;
    
    if (selection_only.checked) {
        if (txt.selectionStart == txt.selectionEnd) { // when no selection
            if (txt.selectionStart == txt.value.length) { // when caret is at the end, start from first letter
                morse.playString(ac.currentTime, txt.value);
                highlightStart = highlightEnd = highlightStartReal = 0;
            } else { // when caret is in the middle, start from caret position
                morse.playString(ac.currentTime, txt.value.substring(txt.selectionStart));
                highlightStart = highlightEnd = highlightStartReal = selectionStart;
            }
        } else { // play selection
            morse.playString(ac.currentTime, txt.value.substring(txt.selectionStart, txt.selectionEnd));
            highlightStart = highlightEnd = highlightStartReal = selectionStart;
        }
    } else {
        morse.playString(ac.currentTime, " vvv " + txt.value);
        highlightStart = highlightEnd = -5; // " vvv " length
        highlightStartReal = 0;
    }
    txt.focus();
    txt.readOnly = true;
    
    stopped = false;
    if (highlight_slowly.checked) {
        highlightStart -= 1;
        highlightEnd -= 1;
    }
    highlight();
}
function delayedRepeat() {
    if (!stopped) play.click();
}
function highlight() {
    if (txt.value[highlightStart] == '<' && txt.value.length > highlightStart + 3 
        && !!morse.PROSIGN[txt.value.substring(highlightStart, highlightStart + 4).toUpperCase()]) {
        highlightEnd = highlightStart + 4;
    } else if (txt.value.length > highlightStart) {
        highlightEnd = highlightStart + 1;
    }
    
    if (highlightStart >= highlightStartReal && !stopped) {
        txt.focus();
        txt.setSelectionRange(highlightStart, highlightEnd);
    }
    
    while (timestamp.length > 1 && ac.currentTime > timestamp[1]) {
        timestamp.shift();
        highlightStart = highlightEnd;
        if (txt.value[highlightStart] == '<' && txt.value.length > highlightStart + 3 
            && !!morse.PROSIGN[txt.value.substring(highlightStart, highlightStart + 4).toUpperCase()]) {
            highlightEnd = highlightStart + 4;
        } else if (txt.value.length > highlightStart) {
            highlightEnd = highlightStart + 1;
        }
    }
    
    if (timestamp.length == 0) {
        stop.click();
        if (repeat.checked) {
            stopped = false;
            setTimeout(delayedRepeat, 3 * morse.getSpaceDelayInMills());
        }
    } else if (timestamp.length == 1 && ac.currentTime > timestamp[0]) {
        timestamp.shift();
        highlightStart = highlightEnd;
        setTimeout(highlight, 10);
    } else if (!stopped) {
        setTimeout(highlight, 10);
    }
}
freq.onchange = function() {
    window.localStorage.setItem('freq', freq.value);
}
wpm.onchange = function() {
    window.localStorage.setItem('wpm', wpm.value);
}
volume.onchange = function() {
    vol = volume.value / 100.0;
    window.localStorage.setItem('volume', volume.value);
}
keyComputer.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keyElmer.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
keyFarnsworth.onchange = function() {
    window.localStorage.setItem('key', document.querySelector('input[name="key"]:checked').value);
}
selectionOnly.onchange = function() {
    window.localStorage.setItem('selection_only', selection_only.checked);
}
highlightSlowly.onchange = function() {
    window.localStorage.setItem('highlight_slowly', highlight_slowly.checked);
}
repeat.onchange = function() {
    window.localStorage.setItem('repeat', repeat.checked);
}
window.onload = function() {
    try {
        if (window.localStorage.getItem('freq')) freq.value = parseInt(window.localStorage.getItem('freq'));
        if (window.localStorage.getItem('wpm')) wpm.value = parseInt(window.localStorage.getItem('wpm'));
        if (window.localStorage.getItem('volume')) volume.value = parseInt(window.localStorage.getItem('volume'));
        vol = volume.value / 100.0;
        if (window.localStorage.getItem('selection_only')) selectionOnly.checked = window.localStorage.getItem('selection_only') == 'true';
        if (window.localStorage.getItem('highlight_slowly')) highlightSlowly.checked = window.localStorage.getItem('highlight_slowly') == 'true';
        if (window.localStorage.getItem('repeat')) repeat.checked = window.localStorage.getItem('repeat') == 'true';
        if (window.localStorage.getItem('key')) document.querySelector('input[name="key"][value='+window.localStorage.getItem('key')+']').checked = true;
    } catch (e) {
    }
};


var hangulQso1 = document.querySelector("#hangul_qso_1");
var hangulQso2 = document.querySelector("#hangul_qso_2");
var hangulQso3 = document.querySelector("#hangul_qso_3");
var hangulQso4 = document.querySelector("#hangul_qso_4");
var englishQso1 = document.querySelector("#english_qso_1");
var englishQso2 = document.querySelector("#english_qso_2");

function changeQsoSample(newTxtId) {
    var newTxt = document.querySelector("#" + newTxtId);
    if (txt == newTxt) return;
    
    stop.click();
    selectionStart = -1;
    
    var txtCaption = document.querySelector("#" + txt.id + "_caption");
    var newTxtCaption = document.querySelector("#" + newTxtId + "_caption");
    
    txt.style.display = "none";
    txtCaption.style.display = "none";
    
    txt = newTxt;
    txtCaption = newTxtCaption;
    
    txt.style.display = "block";
    txt.spellcheck = false;
    txtCaption.style.display = "block";
}
hangulQso1.onclick = function() {
    changeQsoSample("hangul_txt_1");
}
hangulQso2.onclick = function() {
    changeQsoSample("hangul_txt_2");
}
hangulQso3.onclick = function() {
    changeQsoSample("hangul_txt_3");
}
hangulQso4.onclick = function() {
    changeQsoSample("hangul_txt_4");
}
englishQso1.onclick = function() {
    changeQsoSample("english_txt_1");
}
englishQso2.onclick = function() {
    changeQsoSample("english_txt_2");
}
</script>

<p class="font_medium">
<h3>Change Log</h3>
2022.08.15. "Repeat" added.<br />
2022.08.14. "Highlight slowly" added. More QSO samples added.<br />
2022.08.13. "Play selection only" added. Hangul character gap fixed : 5 dots. Prosign(inc. "KA") support added. Remember settings using localStorage. Highlight effect added.<br />
2022.08.12. First version of Hangul CW Trainer.<br />
</p>
</div>
</body>
</html>

<!DOCType HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#" manifest="cache.manifest">
<head>
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<title>DS0KDN QSL Card Generator</title>
<script type="text/javascript">
var qslLogs = [
["2022-001-0001","DS1TZE","2022.08.20.","03:52","HL1NNK","59","7.080","SSB"],
["2022-001-0002","DS1TZE","2022.08.20.","03:58","HL5BUO","59","7.080","SSB"],
["2022-001-0003","DS1TZE","2022.08.20.","04:02","DS1RVI","59","7.080","SSB"],
["2022-001-0004","DS1TZE","2022.08.20.","04:06","DS1TVW","59","7.080","SSB"],
["2022-001-0005","DS1TZE","2022.08.20.","04:09","HL2AWO","59","7.080","SSB"],
["2022-001-0006","DS1TZE","2022.08.20.","04:17","HL2IEI","59","7.080","SSB"],
["2022-001-0007","DS1TZE","2022.08.20.","04:20","HL1IWM","58","7.080","SSB"],
["2022-001-0008","DS1TZE","2022.08.20.","04:25","HL1IWD","57","7.080","SSB"],
["2022-001-0009","DS1TZE","2022.08.20.","04:29","DS5GJS","59","7.080","SSB"],
["2022-001-0010","DS1TZE","2022.08.20.","05:51","DS5TLV","59","7.080","SSB"],
["2022-001-0011","DS1TZE","2022.08.20.","05:55","HL1TDX","59","7.080","SSB"],
["2022-001-0012","DS1TZE","2022.08.20.","06:05","HL1CR","59","7.080","SSB"],
["2022-001-0013","DS1TZE","2022.08.20.","06:08","6K5CRS","59","7.080","SSB"],
["2022-001-0014","DS1TZE","2022.08.20.","06:15","HL5MP","59","7.080","SSB"],
["2022-001-0015","DS1TZE","2022.08.20.","06:21","HL5IUJ","59","7.080","SSB"],
["2022-001-0016","DS1TZE","2022.08.20.","06:26","HL5BBB","59","7.080","SSB"],
["2022-001-0017","DS1TZE","2022.08.20.","06:31","6K5CSL","59","7.080","SSB"],
["2022-001-0018","DS1TZE","2022.08.20.","06:36","DS3OBN","59","7.080","SSB"],
["2022-001-0019","DS1TZE","2022.08.20.","06:40","6K2BXK","59","7.080","SSB"],
["2022-001-0020","DS1TZE","2022.08.20.","06:42","HL5FEE","59","7.080","SSB"],
["2022-001-0021","DS1TZE","2022.08.20.","06:46","DS4RMI","59","7.080","SSB"],
["2022-001-0022","DS1TZE","2022.08.20.","06:50","HL3LMS","59","7.080","SSB"],
["2022-001-0023","DS1TZE","2022.08.20.","08:16","6K2JLX","59","51.020","FM"],
["2022-001-0024","DS1TZE","2022.08.20.","08:38","HL1NNK","57","51.020","FM"],
["2022-001-0025","DS1TZE","2022.08.20.","08:46","DS2EVN","59","51.020","FM"],
["2022-001-0026","DS1TZE","2022.08.20.","08:53","HL2OEY","59","51.020","FM"],
["2022-001-0027","DS1TWO","2022.08.20.","04:09","DS4FAM","59","145.000","FM"],
["2022-001-0028","DS1TWO","2022.08.20.","04:13","DS1UAW","59","145.000","FM"],
["2022-001-0029","DS1TWO","2022.08.20.","04:16","DS1TWI","59","145.000","FM"],
["2022-001-0030","DS1TWO","2022.08.20.","04:18","DS4OFA","55","145.000","FM"],
["2022-001-0031","DS1TWO","2022.08.20.","04:21","6K2JAG","59","145.000","FM"],
["2022-001-0032","DS1TWO","2022.08.20.","04:25","6K2KGC","59","145.000","FM"],
["2022-001-0033","DS1TWO","2022.08.20.","04:35","6K2FJJ","59","145.000","FM"],
["2022-001-0034","DS1TWO","2022.08.20.","05:19","6K2FGN","59","145.000","FM"],
["2022-001-0035","DS1TWO","2022.08.20.","05:25","DS2CYI","59","145.000","FM"],
["2022-001-0036","DS1TWO","2022.08.20.","05:30","HL1ATX","59","145.000","FM"],
["2022-001-0037","DS1TWO","2022.08.20.","05:32","DS1IWR","59","145.000","FM"],
["2022-001-0038","DS1TWO","2022.08.20.","05:38","DS2RGH","59","145.000","FM"],
["2022-001-0039","DS1TWO","2022.08.20.","05:40","6K2IRK","59","145.000","FM"],
["2022-001-0040","DS1TWO","2022.08.20.","05:44","HL3LMS","59","145.000","FM"],
["2022-001-0041","DS1TWO","2022.08.20.","05:46","DS1TXC","59","145.000","FM"],
["2022-001-0042","DS1TWO","2022.08.20.","06:54","DS1TFM","59","7.080","SSB"],
["2022-001-0043","DS1TWO","2022.08.20.","06:57","HL2TJN","59","7.080","SSB"],
["2022-001-0044","DS1TWO","2022.08.20.","06:59","DS3PPP","59","7.080","SSB"],
["2022-001-0045","DS1TWO","2022.08.20.","07:03","6K2FWH","59","7.080","SSB"],
["2022-001-0046","DS1TWO","2022.08.20.","07:07","HL1TKF","59","7.080","SSB"],
["2022-001-0047","DS1TWO","2022.08.20.","07:05","HL3GHJ","59","7.080","SSB"],
["2022-001-0048","DS1TWO","2022.08.20.","07:09","DS4ERW","59","7.080","SSB"],
["2022-001-0049","DS1TWO","2022.08.20.","07:11","6K2ILX","59","7.080","SSB"],
["2022-001-0050","DS1TWO","2022.08.20.","07:15","DS2YZI","59","7.080","SSB"],
["2022-001-0051","DS1TWO","2022.08.20.","07:17","DS2KFJ","59","7.080","SSB"],
["2022-001-0052","DS1TWO","2022.08.20.","07:18","DS4GOD","59","7.080","SSB"],
["2022-001-0053","DS1TWO","2022.08.20.","07:20","DS3EYG","59","7.080","SSB"],
["2022-001-0054","DS1TWO","2022.08.20.","07:24","DS4ENK","59","7.080","SSB"],
["2022-001-0055","DS1TWO","2022.08.20.","07:26","HL2WAU","59","7.080","SSB"],
["2022-001-0056","DS1TWO","2022.08.20.","07:28","HL2APU","59","7.080","SSB"],
["2022-001-0057","DS1TWO","2022.08.20.","07:32","DS1UDC","59","7.080","SSB"],
["2022-001-0058","DS1TWO","2022.08.20.","07:35","HL2LMH","59","7.080","SSB"],
["2022-001-0059","DS1TWO","2022.08.20.","07:37","HL5MKL","59","7.080","SSB"],
["2022-001-0060","DS1TWO","2022.08.20.","07:39","DS1DQH","59","7.080","SSB"],
["2022-001-0061","DS1TWO","2022.08.20.","07:42","JE2PMC","59","7.080","SSB"],
["2022-001-0062","DS1TWO","2022.08.20.","07:44","JA6HNC","59","7.080","SSB"],
["2022-001-0063","DS1TWO","2022.08.20.","07:47","DS5VDO","59","7.080","SSB"],
["2022-001-0064","DS1TWO","2022.08.20.","07:49","DS1TWU","59","7.080","SSB"],
["2022-001-0065","DS1TWO","2022.08.20.","07:51","DS3PXC","59","7.080","SSB"],
["2022-001-0066","DS1TWO","2022.08.20.","07:54","6K2KXY","59","7.080","SSB"],
["2022-001-0067","DS1TWL","2022.08.20.","08:06","DS1TYZ","55","433.040","FM"],
["2022-001-0068","DS1TWL","2022.08.20.","08:13","DS4RXN","57","433.040","FM"],
["2022-001-0069","DS1TWL","2022.08.20.","08:19","HL2OEY","59","433.040","FM"],
["2022-001-0070","DS1TWL","2022.08.20.","08:55","DS1TXU","57","7.080","SSB"],
["2022-001-0071","DS1TWL","2022.08.20.","08:57","DS2IIY","59","7.080","SSB"],
["2022-001-0072","DS1TWL","2022.08.20.","09:01","DS1TWU","59","7.080","SSB"],
["2022-001-0073","DS1TWL","2022.08.20.","09:03","HL3EJE","59","7.080","SSB"],
["2022-001-0074","DS1TWL","2022.08.20.","09:05","DS1HTU","59","7.080","SSB"],
["2022-001-0075","DS1TWL","2022.08.20.","09:07","6K5XHF","59","7.080","SSB"],
["2022-001-0076","DS1TWL","2022.08.20.","09:11","DS1CPT","59","7.080","SSB"],
["2022-001-0077","DS1PEE","2022.08.20.","02:20","HL2IKT","59","51.020","FM"],
["2022-001-0078","DS1PEE","2022.08.20.","02:27","HL1CR","59","51.020","FM"],
["2022-001-0079","DS1PEE","2022.08.20.","02:30","HL1NNK","59","51.020","FM"],
["2022-001-0080","DS1PEE","2022.08.20.","02:32","6K2JLK","59","51.020","FM"],
["2022-001-0081","DS1PEE","2022.08.20.","06:10","HL1CR","59","144.940","FM"],
["2022-001-0082","DS1PEE","2022.08.20.","06:15","DS2NWT","59","144.940","FM"],
["2022-001-0083","DS1PEE","2022.08.20.","06:20","6K2BOT","59","144.940","FM"],
["2022-001-0084","DS1PEE","2022.08.20.","06:25","DS1PVC","59","144.940","FM"],
["2022-001-0085","DS1PEE","2022.08.20.","06:27","DS2DCR","21","144.940","FM"],
["2022-001-0086","DS1PEE","2022.08.20.","06:30","DS4OUL","59","144.940","FM"],
["2022-001-0087","DS1PEE","2022.08.20.","06:33","6K2ILX","59","144.940","FM"],
["2022-001-0088","DS1PEE","2022.08.20.","06:38","DS1MFC","59","144.940","FM"],
["2022-001-0089","DS1PEE","2022.08.20.","06:43","6K2HPD","59","144.940","FM"],
["2022-001-0090","DS1PEE","2022.08.20.","06:45","HL2TJN","59","144.940","FM"],
["2022-001-0091","DS1PEE","2022.08.20.","06:48","DS5SQS","59","144.940","FM"],
["2022-001-0092","DS1PEE","2022.08.20.","06:52","6K2LFR","59","144.940","FM"],
["2022-001-0093","DS1PEE","2022.08.20.","06:53","6K2LFL","59","144.940","FM"],
["2022-001-0094","DS1PEE","2022.08.20.","06:58","DS2KFJ","59","144.940","FM"],
["2022-001-0095","DS1PEE","2022.08.20.","07:05","6K2LAG","59","144.940","FM"],
["2022-001-0096","DS1PEE","2022.08.20.","07:12","DS1UDC","59","144.940","FM"],
["2022-001-0097","DS1PEE","2022.08.20.","07:15","HL1TKF","59","144.940","FM"],
["2022-001-0098","DS1PEE","2022.08.20.","07:21","6K2HYF","59","144.940","FM"],
["2022-001-0099","DS1PEE","2022.08.20.","07:25","HL2APO","59","144.940","FM"],
["2022-001-0100","DS1PEE","2022.08.20.","08:07","HL5QY","59","7.080","SSB"],
["2022-001-0101","DS1PEE","2022.08.20.","08:10","HL2KXT","59","7.080","SSB"],
["2022-001-0102","DS1PEE","2022.08.20.","08:13","HL1ADD","59","7.080","SSB"],
["2022-001-0103","DS1PEE","2022.08.20.","08:15","HL3SIQ","59","7.080","SSB"],
["2022-001-0104","DS1PEE","2022.08.20.","08:19","DS1AXW","59","7.080","SSB"],
["2022-001-0105","DS1PEE","2022.08.20.","08:21","DS2OKO","59","7.080","SSB"],
["2022-001-0106","DS1PEE","2022.08.20.","08:25","HL4GKR","59","7.080","SSB"],
["2022-001-0107","DS1PEE","2022.08.20.","08:27","HL3WAT","59","7.080","SSB"],
["2022-001-0108","DS1PEE","2022.08.20.","08:30","DS4WBU","59","7.080","SSB"],
["2022-001-0109","DS1PEE","2022.08.20.","08:32","6K2JLX ","59","7.080","SSB"],
["2022-001-0110","DS1PEE","2022.08.20.","08:35","6K5XHF","59","7.080","SSB"],
["2022-001-0111","DS1PEE","2022.08.20.","08:37","DS1NSG","59","7.080","SSB"],
["2022-001-0112","DS1PEE","2022.08.20.","08:39","DS2SHC","59","7.080","SSB"],
["2022-001-0113","DS1PEE","2022.08.20.","08:40","6K2ETS","59","7.080","SSB"],
["2022-001-0114","DS1PEE","2022.08.20.","08:43","DS4HIW","59","7.080","SSB"],
["2022-001-0115","DS1PEE","2022.08.20.","08:45","HL5JDU","59","7.080","SSB"],
["2022-001-0116","DS1PEE","2022.08.20.","08:50","HL3LST","59","7.080","SSB"],
["2022-001-0117","DS1PEE","2022.08.20.","08:53","HL2ADO","59","7.080","SSB"]
]
</script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Secular+One" type="text/css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Courgette" type="text/css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Yeon+Sung" type="text/css" />
<!--script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script-->
</head>
<body>
<button id="save">SAVE as SVG file</button>
<svg version="1.1" id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    width="2270" height="7200">
    <link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Secular+One" type="text/css" />
    <link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Courgette" type="text/css" />
    <link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Yeon+Sung" type="text/css" />
    <style type="text/css">
	.cs {
        font-family: Secular One;
        font-size: 30pt;
    }
    .date {
        font-family: Courgette;
        font-size: 12pt;
    }
    .time {
        font-family: Courgette;
        font-size: 12pt;
    }
    .band {
        font-family: Courgette;
        font-size: 12pt;
    }
    .mode {
        font-family: Courgette;
        font-size: 12pt;
    }
    .rst {
        font-family: Courgette;
        font-size: 12pt;
    }
    .op {
        font-family: Secular One;
        font-size: x-large;
    }
    .sn {
        font-family: Secular One;
        font-size: x-small;
    }
	.msg {
        font-family: Yeon Sung;
        font-size: 12pt;
	}
    </style>
</svg>
</body>
<script type="text/javascript">
var QSL_SVG = "https://shingiru.github.io/ds0kdn/ds0kdn_qsl_card_back.svg";
var COLS = 5, ROWS = Math.ceil(qslLogs * 1.0 / COLS); // when change this value, we need to change above svg width,height also
var SCALE_FACTOR = 1;
var CARD_WIDTH = 420, CARD_HEIGHT = 278;
var svg = document.querySelector("#svg");
document.querySelector("#save").addEventListener('click', saveSvg);

var cols = rows = 0;
for (var log of qslLogs) {
    addCard(CARD_WIDTH * cols, CARD_HEIGHT * rows, log[0], log[1], log[2], log[3], log[4], log[5], log[6], log[7]);
    cols++;
    if (cols == COLS) {
        cols = 0;
        rows++;
    }
}

function addCard(x, y, sn, op, date, time, cs, rst, band, mode) {
    var card = document.createElementNS('http://www.w3.org/2000/svg', "image");
    card.setAttribute('href', QSL_SVG);
    card.setAttribute('x', x * SCALE_FACTOR);
    card.setAttribute('y', y * SCALE_FACTOR);
    card.setAttribute('width', CARD_WIDTH * SCALE_FACTOR);
    card.setAttribute('height', CARD_HEIGHT * SCALE_FACTOR);
    svg.append(card);
    
    addText(svg, (x + 105) * SCALE_FACTOR, (y + 74) * SCALE_FACTOR, 'cs', cs, true); // scale factor will be treated in addText
    addText(svg, (x + 72) * SCALE_FACTOR, (y + 142) * SCALE_FACTOR, 'date', date, true);
    addText(svg, (x + 158) * SCALE_FACTOR, (y + 142) * SCALE_FACTOR, 'time', time, true);
    addText(svg, (x + 241) * SCALE_FACTOR, (y + 142) * SCALE_FACTOR, 'band', band, true);
    addText(svg, (x + 313) * SCALE_FACTOR, (y + 142) * SCALE_FACTOR, 'mode', mode, true);
    addText(svg, (x + 373) * SCALE_FACTOR, (y + 142) * SCALE_FACTOR, 'rst', rst, true);
    //addText(svg, (x + 87) * SCALE_FACTOR, (y + 215) * SCALE_FACTOR, 'op', op, true);
	addOpImage(svg, (x + 50) * SCALE_FACTOR, (y + 170) * SCALE_FACTOR, 'op', op);
    addText(svg, (x + 108) * SCALE_FACTOR, (y + 256) * SCALE_FACTOR, 'sn', sn, true);
	addText(svg, (x + 203) * SCALE_FACTOR, (y + 51) * SCALE_FACTOR, 'msg', '가을이 시작된 법화산에서', false);
	addText(svg, (x + 203) * SCALE_FACTOR, (y + 73) * SCALE_FACTOR, 'msg', '오엠님과 좋은 신호로 만나뵙게 되어', false);
	addText(svg, (x + 203) * SCALE_FACTOR, (y + 95) * SCALE_FACTOR, 'msg', '반갑고 기뻤습니다.', false);
}

function addText(svg, x, y, className, value, center) {
    var text = document.createElementNS('http://www.w3.org/2000/svg', "text");
    text.setAttribute('x', x);
    text.setAttribute('y', y);
	if (center) text.setAttribute('text-anchor', 'middle');
    text.setAttribute('class', className);
    text.appendChild(document.createTextNode(value));
    svg.append(text);
}

function addRect(svg, x, y, width, height) {
	var rect = document.createElementNS('http://www.w3.org/2000/svg', "rect");
	rect.setAttribute('x', x);
    rect.setAttribute('y', y);
	rect.setAttribute('width', width);
    rect.setAttribute('height', height);
    rect.setAttribute('fill', 'white');
	svg.append(rect);
}

function addOpImage(svg, x, y, className, op) {
	var image = document.createElementNS('http://www.w3.org/2000/svg', "image");
    image.setAttribute('href', "https://shingiru.github.io/ds0kdn/" + op + ".svg");
    image.setAttribute('x', x);
    image.setAttribute('y', y);
	image.setAttribute('width', 71);
	image.setAttribute('height', 71);
    image.setAttribute('class', className);
	svg.append(image);
}

function saveSvg() {
	var data = '<?xml version="1.0" standalone="no"?>\r\n' + svg.outerHTML;
	var blob = new Blob([data], {type:"image/svg+xml;charset=utf-8"});
	var url = URL.createObjectURL(blob);
	
	var link = document.createElement("a");
    link.href = url;
    link.download = "20220820_ds0kdn_qsl_cards.svg";
    link.click();
}
</script>
</html>